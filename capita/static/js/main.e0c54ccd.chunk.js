(window.webpackJsonpcapita=window.webpackJsonpcapita||[]).push([[0],[,,,,,,,,,function(t,e,n){t.exports=n(24)},,,,,,function(t,e,n){},function(t,e,n){},,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(6),o=n.n(c),i=n(4),s=n.n(i),u=n(7),l=n(1),p=(n(15),n(3));function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}var d={a:{c:2},c:{d:1,f:4},b:{d:4,e:7},d:{f:1,g:2},f:{g:3},g:{h:4},e:{h:10},h:{}},f=Object.keys(d).reduce(function(t,e){var n=d[e];return Object.keys(n).forEach(function(n){t[n]=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(n,!0).forEach(function(e){Object(p.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t[n]||{},Object(p.a)({},e,d[e][n]))}),t},d);n(16);function b(){return r.a.createElement("header",{className:"header"},r.a.createElement("h1",{className:"header__title"},"Capita React Coding Exercise"))}var h=n(8);function g(t){var e=t.width,n=t.height,a=t.pointKey,r=t.total,c=Object.keys(f).findIndex(function(t){return t===a}),o=2*Math.PI*(c+r/2)/r,i=(e>n?n:e)/2;return{left:e/2+Math.sin(o)*i,top:n/2+Math.cos(o)*i}}n(18);function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function O(t){var e=t.onClick,n=t.selected,a=t.clickable,c=t.style,o=t.children;return n?r.a.createElement("div",{className:"point point--selected",style:c},o):a?r.a.createElement("button",{className:"point",onClick:e,style:c},o):r.a.createElement("div",{className:"point point--inactive",style:c},o)}function j(t){var e=t.pointKey,n=t.total,c=Object(l.a)(t.size,2),o=c[0],i=c[1],s=t.clickPoint,u=t.selected,m=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(n,!0).forEach(function(e){Object(p.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({position:"absolute"},g({width:o,height:i,pointKey:e,total:n})),d=Object(a.useCallback)(function(){s&&s(e)},[s,e]);return o&&i?r.a.createElement(O,{selected:u,clickable:!!s,style:m,onClick:d},r.a.createElement("div",{className:"point__title"},e)):null}n(19);function E(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}function w(t){var e=t.name,n=t.source,a=t.dest,c=t.distance,o=t.total,i=Object(l.a)(t.size,2),s=i[0],u=i[1];if(!s||!u)return null;var p=g({width:s,height:u,pointKey:n,total:o}),m=g({width:s,height:u,pointKey:a,total:o}),d={position:"absolute",left:(p.left+m.left)/2,top:(p.top+m.top)/2},f=p.left,b=p.top,h=p.left-m.left,y=p.top-m.top,O=Math.sqrt(h*h+y*y),j=E(p.left,3)===E(m.left,3)?0:Math.asin(h/O),w=p.top>m.top?3*Math.PI/2-j:Math.PI/2+j,v={position:"absolute",left:f,top:b,width:O,transform:"translate(-".concat(O/2,"px,0) rotate(").concat(w,"rad) translate(").concat(O/2,"px,0)")};return r.a.createElement("div",{className:"connection"},r.a.createElement("div",{className:"connection__line",style:v}),r.a.createElement("div",{className:"connection__distance",style:d},e," ",c))}var v=n(2);function _(t,e){return function(n){return n.reduce(function(n,a){return a.reduce(function(n,r,c){return e(r)&&n.push({beenAt:[t].concat(Object(v.a)(0===c?[]:a.slice(0,c).map(function(t){return t.goingTowards}))),waypoint:r}),n},n)},[])}}n(20);function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function N(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(n,!0).forEach(function(e){Object(p.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var P=.5;function T(t){var e=t.waypointRoute,n=Object(l.a)(t.size,2),c=n[0],o=n[1],i=t.total;return Object(a.useMemo)(function(){var t=g({width:c,height:o,pointKey:e.beenAt[e.beenAt.length-1],total:i}),n=g({width:c,height:o,pointKey:e.waypoint.goingTowards,total:i}),a=n.left-t.left,s=n.top-t.top,u="animate-".concat(e.beenAt.join("")).concat(e.waypoint.goingTowards,"-").concat(Math.round(a),"-").concat(Math.round(s)),l="@keyframes ".concat(u," {\n      0% {\n        transform: translate(0, 0);\n      }\n      100% {\n        transform: translate(").concat(a,"px, ").concat(s,"px);\n      }\n    }"),p=document.createElement("style");return p.type="text/css",p.appendChild(document.createTextNode(l)),document.getElementsByTagName("head")[0].appendChild(p),r.a.createElement("div",{className:"animating-route",key:"from".concat(e.beenAt.join(""),"to").concat(e.waypoint.goingTowards),style:N({position:"absolute",animationName:u,animationTimingFunction:"linear",animationDuration:"".concat(P*e.waypoint.distance,"s"),animationDelay:"0.0s",animationIterationCount:1,animationDirection:"normal",animationFillMode:"forwards"},t)})},[c,o,e.beenAt,e.waypoint.goingTowards,e.waypoint.distance,i])}var A=function(t){return!t.started},C=function(t){return t.started&&!t.completed};function D(t){var e=t.startAt,n=t.endAt,c=t.routes,o=t.dispatch,i=t.size,s=t.total;if(Object(a.useEffect)(function(){e&&n&&_(e,A)(c).forEach(function(t){o({type:"START",unstartedRoute:t}),setTimeout(function(){o({type:"END",unstartedRoute:t,targetPoint:n})},1e3*P*t.waypoint.distance)})},[o,n,c,e]),!e)return null;var u=_(e,C)(c);return r.a.createElement(r.a.Fragment,null,u.map(function(t){return r.a.createElement(T,{waypointRoute:t,key:"animating".concat(t.beenAt.join("")).concat(t.waypoint.goingTowards),size:i,total:s})}))}n(21);function x(t){var e=t.points,n=t.pointA,c=t.pointB,o=t.clickPoint,i=t.routes,s=t.dispatch,u=Object.keys(e),p=Object(a.useRef)(null),m=Object(a.useState)([0,0]),d=Object(l.a)(m,2),f=d[0],b=d[1];return Object(a.useEffect)(function(){var t=new h.a(function(t){var e=t[0].target;b([e.clientWidth,e.clientHeight])});return p.current&&t.observe(p.current),t.disconnect},[]),r.a.createElement("div",{className:"routes",ref:p},u.map(function(t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(j,{pointKey:t,total:u.length,size:f,clickPoint:t===n||t===c?void 0:o,selected:t===n||t===c}),Object.keys(e[t]).filter(function(e){return e.toString().charCodeAt(0)>t.toString().charCodeAt(0)}).map(function(n){return r.a.createElement(w,{key:"".concat(t,"\u2192").concat(n),name:"".concat(t,"\u2192").concat(n),source:t,dest:n,total:u.length,size:f,distance:e[t][n]})}))}),r.a.createElement(D,{startAt:n,endAt:c,routes:i,dispatch:s,size:f,total:u.length}))}var S={pointA:void 0,pointB:void 0,routes:[]},R=r.a.createContext(S);n(22);function M(t){var e=t.start,n=t.route,a=t.name;return r.a.createElement("span",{className:"route-detail"},r.a.createElement("span",{className:"route-detail__point"},e),n.map(function(t){return r.a.createElement(r.a.Fragment,{key:"".concat(a).concat(t.goingTowards)}," ","\u2192 ",r.a.createElement("span",{className:"route-detail__point"},t.goingTowards)," ",r.a.createElement("span",{className:"route-detail__distance"},t.distance))}))}function I(t){var e=t.name,n=t.start,a=t.routes;return 0===a.length?null:r.a.createElement("ul",{className:"route-details"},a.map(function(t,a){return r.a.createElement("li",{key:"".concat(e).concat(a),className:"route-details__detail"},r.a.createElement(M,{name:"".concat(e).concat(a),start:n,route:t}))}))}function z(t,e){if(0!==e.length&&e[e.length-1].goingTowards===t)return e.reduce(function(t,e){return t+e.distance},0)}n(23);function B(t){var e=t.busy,n=t.reset,c=t.cheeky,o=t.setCheeky,i=Object(a.useState)(!1),s=Object(l.a)(i,2),u=s[0],p=s[1],m=Object(a.useCallback)(function(){o(!1),p(!0)},[o]),d=Object(a.useCallback)(function(){p(!1),n()},[n]);return r.a.createElement(R.Consumer,null,function(t){var n=t.pointA,a=t.pointB,o=t.routes;if(!n)return r.a.createElement("div",{className:"instructions"},r.a.createElement("p",{className:"instructions__text"},"Click on your first point."));if(!a)return r.a.createElement("div",{className:"instructions"},r.a.createElement("p",{className:"instructions__text"},"Measuring the shortest distance from point"," ",r.a.createElement("span",{className:"instructions__selected-point"},n),"."),r.a.createElement("p",{className:"instructions__text"},"Now click on your second point."));if(!e){var i=function(t,e,n){return 0===n.length?[]:n.reduce(function(t,n){var a=t.distance,r=t.best,c=z(e,n);return void 0===c?{distance:a,best:r}:0===r.length||c<a?{distance:c,best:[n]}:c>a?{distance:a,best:r}:{distance:a,best:[].concat(Object(v.a)(r),[n])}},{distance:0,best:[]}).best}(0,a,o);return r.a.createElement("div",{className:"instructions"},r.a.createElement("p",{className:"instructions__text"},"Done!"),0===i.length&&r.a.createElement("p",{className:"instructions__text"},"Oh dear. There are no routes between"," ",r.a.createElement("span",{className:"instructions__selected-point"},n)," ","and"," ",r.a.createElement("span",{className:"instructions__selected-point"},a),".")," ",1===i.length&&r.a.createElement("p",{className:"instructions__text"},"The best route is:"," ",r.a.createElement(M,{name:"best",start:n,route:i[0]}),"with a distance of"," ",r.a.createElement("span",{className:"instructions__distance"},z(a,i[0])))," ",i.length>1&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"instructions__text"},"The best routes are:"),r.a.createElement(I,{start:n,name:"best",routes:i})),i.length>0&&c&&!u&&r.a.createElement("button",{className:"instructions__button",type:"button",onClick:m},"Would you like to view this solution using Dijkstra's algorithm?"),u&&r.a.createElement("p",{className:"instructions__cheeky"},"You best hire me, then"," ",r.a.createElement("span",{role:"img","aria-label":"Wink wink"},"\ud83d\ude09")),r.a.createElement("button",{className:"instructions__button",type:"button",onClick:d},"Click to reset"),!!o.length&&r.a.createElement("p",{className:"instructions__text"},"Here's the routes I tried:"),r.a.createElement(I,{start:n,name:"all",routes:o}))}return r.a.createElement("div",{className:"instructions"},r.a.createElement("p",{className:"instructions__text"},"Finding the shortest route from"," ",r.a.createElement("span",{className:"instructions__selected-point"},n)," to"," ",r.a.createElement("span",{className:"instructions__selected-point"},a),"..."),r.a.createElement(I,{start:n,name:"all",routes:o}))})}function K(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function F(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?K(n,!0).forEach(function(e){Object(p.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function W(t,e){switch(e.type){case"RESET":return[];case"INIT":return Object(v.a)(e.routes);case"START":var n=[].concat(Object(v.a)(e.unstartedRoute.beenAt.slice(1)),[e.unstartedRoute.waypoint.goingTowards]);return t.map(function(t){var e=t.map(function(t){return t.goingTowards});return e.length!==n.length||e.some(function(t,e){return t!==n[e]})?t:t.map(function(t){return t.started?t:F({},t,{started:!0})})});case"END":var a=[].concat(Object(v.a)(e.unstartedRoute.beenAt.slice(1)),[e.unstartedRoute.waypoint.goingTowards]);return t.reduce(function(t,n){var r=n.map(function(t){return t.goingTowards});if(r.length!==a.length||r.some(function(t,e){return t!==a[e]}))return[].concat(Object(v.a)(t),[n]);var c=n.map(function(t){return t.completed?t:F({},t,{completed:!0})}),o=f[e.unstartedRoute.waypoint.goingTowards],i=Object.keys(o).filter(function(t){return!e.unstartedRoute.beenAt.some(function(e){return t===e})});return e.unstartedRoute.waypoint.goingTowards===e.targetPoint||0===i.length?[].concat(Object(v.a)(t),[c]):[].concat(Object(v.a)(t),Object(v.a)(i.map(function(t){return[].concat(Object(v.a)(c),[{goingTowards:t,distance:o[t],started:!1,completed:!1}])})))},[]);default:return t}}var H=function(t){return!t.completed};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(function(){var t=Object(a.useState)(void 0),e=Object(l.a)(t,2),n=e[0],c=e[1],o=Object(a.useState)(void 0),i=Object(l.a)(o,2),p=i[0],m=i[1],d=Object(a.useReducer)(W,[]),h=Object(l.a)(d,2),g=h[0],y=h[1],O=Object(a.useState)(!1),j=Object(l.a)(O,2),E=j[0],w=j[1],v=Object(a.useState)(!0),k=Object(l.a)(v,2),N=k[0],P=k[1],T=Object(a.useCallback)(function(){var t=Object(u.a)(s.a.mark(function t(e){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n?p||(m(e),w(!0),0===(a=Object.keys(f[n])).length?w(!1):y({type:"INIT",routes:a.map(function(t){return[{goingTowards:t,distance:f[n][t],completed:!1,started:!1}]})})):c(e);case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),[n,p]),A=Object(a.useCallback)(function(){c(void 0),m(void 0),y({type:"RESET"}),w(!1)},[]);return Object(a.useEffect)(function(){E&&g.length&&n&&(0===_(n,H)(g).length&&w(!1))},[E,n,g]),r.a.createElement(R.Provider,{value:{pointA:n,pointB:p,routes:g}},r.a.createElement("article",{className:"app"},r.a.createElement("section",{className:"app__header"},r.a.createElement(b,null)),r.a.createElement("section",{className:"app__body"},r.a.createElement(x,{points:f,pointA:n,pointB:p,clickPoint:E||n&&p?void 0:T,routes:g,dispatch:y})),r.a.createElement("section",{className:"app__info"},r.a.createElement(B,{busy:E,reset:A,cheeky:N,setCheeky:P}))))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}],[[9,1,2]]]);
//# sourceMappingURL=main.e0c54ccd.chunk.js.map