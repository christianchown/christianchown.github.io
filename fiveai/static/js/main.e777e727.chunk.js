(this.webpackJsonpfiveai=this.webpackJsonpfiveai||[]).push([[0],[,,,,,,function(e,n,t){e.exports=t(17)},,,,,function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(5),c=t.n(o);t(11),t(12);function i(){return r.a.createElement("header",{className:"header"},r.a.createElement("h1",{className:"header__title"},"FiveAI Coding Exercise"))}var l=t(2),u=t(1);function d(e,n){return e.x1<n.x1&&e.x2>n.x2&&e.y1<n.y1&&e.y2>n.y2}function s(e,n){return!d(e,n)&&!d(n,e)&&n.x1<=e.x2&&n.x2>=e.x1&&n.y1<=e.y2&&n.y2>=e.y1}function m(e,n){var t=e.filter(function(e){return function(n){return d(e,n.land)}}(n),[]);if(t.length>0)return[].concat(Object(l.a)(e.filter(function(e){return function(n){return!d(e,n.land)}}(n))),[{land:n,children:t}]);var a=e.findIndex(function(e){return function(n){return d(n.land,e)}}(n));return-1===a?[].concat(Object(l.a)(e),[{land:n,children:[]}]):e.map((function(e,t){return t!==a?e:{land:e.land,children:m(e.children,n)}}))}function f(e){var n=e.reduce((function(e,n){var t=e.nonOverlapping,a=e.overlappingLands,r=t.filter(function(e){return function(n){return!s(n,e)}}(n));if(r.length===t.length)return{nonOverlapping:[].concat(Object(l.a)(t),[n]),overlappingLands:a};var o=t.filter(function(e){return function(n){return s(n,e)}}(n));return{nonOverlapping:r,overlappingLands:[].concat(Object(l.a)(a),Object(l.a)(o),[n])}}),{nonOverlapping:[],overlappingLands:[]}),t=n.nonOverlapping;return{overlappingLands:n.overlappingLands,regions:t.reduce(m,[])}}var g=function(e){return function(n){return JSON.stringify(e)===JSON.stringify(n)}},v=[{x1:1,y1:1,x2:10,y2:6},{x1:1.5,y1:1.5,x2:6,y2:5},{x1:2,y1:2,x2:3,y2:3},{x1:2,y1:3.5,x2:3,y2:4.5},{x1:3.5,y1:2,x2:5.5,y2:4.5},{x1:4,y1:3.5,x2:5,y2:4},{x1:4,y1:2.5,x2:5,y2:3},{x1:7,y1:3,x2:9.5,y2:5.5},{x1:7.5,y1:4,x2:8,y2:5},{x1:8.5,y1:3.5,x2:9,y2:4.5},{x1:3,y1:7,x2:8,y2:10},{x1:5,y1:7.5,x2:7.5,y2:9.5},{x1:5.5,y1:8,x2:6,y2:9},{x1:6.5,y1:8,x2:7,y2:9}],b=function(e){return{lands:e,regions:f(e)}},p=Object(a.createContext)(void 0),y=Object(a.createContext)(void 0),x=Object(a.createContext)(void 0);function E(e){var n=e.children,t=Object(a.useState)(b(v)),o=Object(u.a)(t,2),c=o[0],i=o[1],d=Object(a.useCallback)((function(e){i((function(n){return b([].concat(Object(l.a)(n.lands),[e]))}))}),[]),s=Object(a.useCallback)((function(e){i((function(n){var t=Object(l.a)(n.lands);return t.splice(e,1),b(t)}))}),[]),m=Object(a.useCallback)((function(e,n){i((function(t){return b(t.lands.map((function(t,a){return a===e?n:t})))}))}),[]),f=Object(a.useState)(void 0),E=Object(u.a)(f,2),O=E[0],h=E[1],_=Object(a.useState)(void 0),j=Object(u.a)(_,2),N=j[0],C=j[1],L=Object(a.useMemo)((function(){return O?g(O):function(){return!1}}),[O]),k=Object(a.useMemo)((function(){return N?g(N):function(){return!1}}),[N]);return r.a.createElement(p.Provider,{value:c},r.a.createElement(y.Provider,{value:{newLand:d,deleteLand:s,updateLand:m}},r.a.createElement(x.Provider,{value:{landIsHovered:L,landBeingEdited:k,setHoveredLand:h,setEditingLand:C,editingMode:void 0!==N}},n)))}function O(){var e=Object(a.useContext)(p);if(void 0===e)throw new Error("useCurrentLands must be used in a child of <LandContext />");return e.lands}function h(){var e=Object(a.useContext)(p);if(void 0===e)throw new Error("useCurrentRegions must be used in a child of <LandContext />");return e.regions}function _(){var e=Object(a.useContext)(x);if(void 0===e)throw new Error("useEditLands must be used in a child of <LandContext />");return{setEditingLand:e.setEditingLand,setHoveredLand:e.setHoveredLand}}function j(){var e=Object(a.useContext)(x);if(void 0===e)throw new Error("useEditLands must be used in a child of <LandContext />");return{editingMode:e.editingMode,landIsHovered:e.landIsHovered,landBeingEdited:e.landBeingEdited}}t(13);var N=t(3),C=t.n(N),L=["darkolivegreen","olive","olivedrab","yellowgreen","limegreen","lime","lawngreen","chartreuse","greenyellow","springgreen","mediumspringgreen","lightgreen","palegreen","darkseagreen","mediumaquamarine","mediumseagreen","seagreen","forestgreen","green","darkgreen"];function k(e){var n=e.getX,t=e.getY,a=e.region,o=a.land,c=a.children,i=e.colourOffset,l=j(),u=l.landBeingEdited,d=l.landIsHovered,s=l.editingMode,m="".concat(n(o.x1),"%"),f="".concat(t(o.y1),"%"),g="".concat(n(o.x2)-n(o.x1),"%"),v="".concat(t(o.y2)-t(o.y1),"%");return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:C()("continent__region",{"continent__region--edited":u(o),"continent__region--hovered":!s&&d(o)}),style:{left:m,top:f,width:g,height:v,backgroundColor:L[i%L.length]},title:"(".concat(o.x1,", ").concat(o.y1,") -> (").concat(o.x2,", ").concat(o.y2,")")}),r.a.createElement(w,{getX:n,getY:t,regions:c,colourOffset:i+1}))}function w(e){var n=e.getX,t=e.getY,a=e.regions,o=e.colourOffset;return r.a.createElement(r.a.Fragment,null,a.map((function(e,a){return r.a.createElement(k,{key:"region".concat(o,"-").concat(a),region:e,getX:n,getY:t,colourOffset:o})})))}t(14);function S(e){var n=e.getX,t=e.getY,a=e.land,o=j(),c=o.landBeingEdited,i=o.landIsHovered,l=o.editingMode,u="".concat(n(a.x1),"%"),d="".concat(t(a.y1),"%"),s="".concat(n(a.x2)-n(a.x1),"%"),m="".concat(t(a.y2)-t(a.y1),"%");return r.a.createElement("div",{className:C()("overlapping-land",{"overlapping-land--hovered":!l&&i(a),"overlapping-land--edited":c(a)}),title:"(".concat(a.x1,", ").concat(a.y1,") -> (").concat(a.x2,", ").concat(a.y2,")"),style:{left:u,top:d,width:s,height:m}})}var M=function(e,n,t,a){return 100*(e-n+a)/(t-n+a+a)};function F(){var e=O(),n=r.a.useMemo((function(){return e.reduce((function(e,n){return void 0===e?[n.x1,n.x2,n.y1,n.y2]:[e[0]>n.x1?n.x1:e[0],e[1]<n.x2?n.x2:e[1],e[2]>n.y1?n.y1:e[2],e[3]<n.y2?n.y2:e[3]]}),void 0)}),[e]),t=Object(a.useCallback)((function(e){return n?M(e,n[0],n[1],.5):0}),[n]),o=Object(a.useCallback)((function(e){return n?M(e,n[2],n[3],1):0}),[n]),c=h(),i=c.overlappingLands,l=c.regions;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"continent"},r.a.createElement(w,{regions:l,getX:t,getY:o,colourOffset:0}),i.map((function(e,n){return r.a.createElement(S,{key:"overlappingLand".concat(n),getX:t,getY:o,land:e})}))))}t(15),t(16);function H(e){var n=e.value,t=e.set,o=e.editing,c=e.error,i=Object(a.useCallback)((function(e){t(e.target.value)}),[t]);return o?r.a.createElement("input",{className:C()("land-form__input",{"land-form__input--error":c}),value:void 0!==n?n.toString():"",onChange:i}):r.a.createElement("span",{className:"land-form__input land-form__input--readonly"},n)}function I(e){var n=e.land,t=e.submit,o=e.deleteLand,c=e.overlapping,i=_().setEditingLand,l=j(),d=l.landBeingEdited,s=l.landIsHovered,m=l.editingMode,f=n?d(n):!m,g=Object(a.useState)([]),v=Object(u.a)(g,2),b=v[0],p=v[1],y=Object(a.useState)(!1),x=Object(u.a)(y,2),E=x[0],O=x[1],h=Object(a.useState)(!1),N=Object(u.a)(h,2),L=N[0],k=N[1],w=Object(a.useState)(n?n.x1.toString():""),S=Object(u.a)(w,2),M=S[0],F=S[1],I=Object(a.useState)(n?n.x2.toString():""),B=Object(u.a)(I,2),X=B[0],Y=B[1],J=Object(a.useState)(n?n.y1.toString():""),A=Object(u.a)(J,2),D=A[0],P=A[1],W=Object(a.useState)(n?n.y2.toString():""),q=Object(u.a)(W,2),K=q[0],R=q[1],U=Object(a.useCallback)((function(){var e=[],n=Number.parseFloat(M),t=Number.parseFloat(X),a=Number.parseFloat(D),r=Number.parseFloat(K);return Number.isNaN(n)&&e.push("x1"),Number.isNaN(t)&&e.push("x2"),Number.isNaN(a)&&e.push("y1"),Number.isNaN(r)&&e.push("y2"),0===e.length&&(n>=t&&(e.push("x1"),e.push("x2")),a>=r&&(e.push("y1"),e.push("y2"))),p(e),O(!0),0===e.length?{x1:n,x2:t,y1:a,y2:r}:void 0}),[M,X,D,K]),$=Object(a.useCallback)((function(){O(!0);var e=U();e&&(t(e),i(void 0))}),[i,t,U]),z=Object(a.useCallback)((function(e){return function(n){e(n),E&&U()}}),[E,U]);return r.a.createElement("div",{className:C()("land-form",{"land-form--overlapping":c&&!m,"land-form--edited":f,"land-form--hovered":!(!n||m)&&s(n)})},r.a.createElement("div",{className:"land-form__inputs"},"(",r.a.createElement(H,{editing:f,value:M,set:z(F),error:b.includes("x1")}),","," ",r.a.createElement(H,{editing:f,value:D,set:z(P),error:b.includes("y1")}),") \u2192 (",r.a.createElement(H,{editing:f,value:X,set:z(Y),error:b.includes("x2")}),","," ",r.a.createElement(H,{editing:f,value:K,set:z(R),error:b.includes("y2")}),")"),r.a.createElement("div",{className:"land-form__actions"},f&&o&&r.a.createElement("button",{className:"land-form__action",type:"button",title:"Cancel",onClick:function(){return i(void 0)}},r.a.createElement("span",{role:"img","aria-label":"Cancel"},"\ud83d\udd19")),f&&r.a.createElement("button",{className:"land-form__action",type:"button",title:"Save",onClick:$},r.a.createElement("span",{role:"img","aria-label":"Save"},"\ud83d\udcbe")),!f&&!m&&r.a.createElement("button",{className:"land-form__action",type:"button",title:"Edit",onClick:function(){return i(n)}},r.a.createElement("span",{role:"img","aria-label":"Edit"},"\u270f\ufe0f")),!f&&!m&&o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"land-form__action",type:"button",title:"Delete",onClick:function(){return k(!0)}},r.a.createElement("span",{role:"img","aria-label":"Delete"},"\u274c")),r.a.createElement("div",{className:L?"modal modal--visible":"modal"},r.a.createElement("div",{className:"modal__wrapper"},r.a.createElement("p",{className:"modal__heading"},"Delete this land mass?"),r.a.createElement("div",{className:"modal__buttons"},r.a.createElement("button",{type:"button",title:"Confirm deletion",className:"modal__button modal__button--ok",onClick:function(){k(!1),o()}},"OK"),r.a.createElement("button",{type:"button",title:"Close",className:"modal__button modal__button--close",onClick:function(){return k(!1)}},"Cancel")))))))}function B(){var e=O(),n=h().overlappingLands,t=function(){var e=Object(a.useContext)(y);if(void 0===e)throw new Error("useUpdateCurrentLands must be used in a child of <LandContext />");return e}(),o=t.updateLand,c=t.deleteLand,i=t.newLand,l=_().setHoveredLand,d=j().editingMode,s=Object(a.useState)(!1),m=Object(u.a)(s,2),f=m[0],v=m[1];return Object(a.useEffect)((function(){v(!1)}),[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"land-forms"},e.map((function(e,t){return r.a.createElement("li",{key:"landForm".concat(t).concat(JSON.stringify(e)),className:"land-forms__form",onMouseOver:function(){return l(e)},onMouseLeave:function(){return l(void 0)}},r.a.createElement(I,{land:e,submit:function(e){return o(t,e)},deleteLand:function(){c(t)},overlapping:n.some(g(e))}))})),f&&r.a.createElement("li",{className:"land-forms__form"},r.a.createElement(I,{land:void 0,submit:function(e){return i(e)},deleteLand:void 0,overlapping:!1}))),!f&&!d&&r.a.createElement("button",{title:"Add a new land mass",type:"button",onClick:function(){v(!0)}},r.a.createElement("span",{role:"img","aria-label":"Add new"},"\u2795")))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement((function(){return r.a.createElement(E,null,r.a.createElement("article",{className:"app"},r.a.createElement("section",{className:"app__header"},r.a.createElement(i,null)),r.a.createElement("section",{className:"app__body"},r.a.createElement(F,null)),r.a.createElement("section",{className:"app__info"},r.a.createElement(B,null))))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[6,1,2]]]);
//# sourceMappingURL=main.e777e727.chunk.js.map